(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8862:function(e,s,t){Promise.resolve().then(t.bind(t,9697))},9697:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return V}});var a=t(7437),l=t(2265),r=t(6337),n=t(2369),i=t(91),d=t(7829),c=t(9202),o=t(4428),m=t(8736),x=t(7168),u=t(6865),h=t(2208),p=t(8930),g=t(1047),j=t(1671),f=t(7689),N=t(1649),v=t(3774),b=t(9397),y=t(2660),w=t(8728),C=t(6858),E=t(1769),S=t(6595),T=t(3113),D=t(9227),A=t(3276),I=t(5868),z=t(2489),k=t(2869),R=t(6070),Z=t(5974),O=t(610),B=t(4508);let M=l.forwardRef((e,s)=>{let{className:t,value:l,...r}=e;return(0,a.jsx)(O.fC,{ref:s,className:(0,B.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:(0,a.jsx)(O.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});M.displayName=O.fC.displayName;var U=t(3647),F=t(5186),L=t(6394);let _=(0,t(535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),P=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(L.f,{ref:s,className:(0,B.cn)(_(),t),...l})});P.displayName=L.f.displayName;var q=t(3578);function V(){var e,s,t,O,B,L,_,V,Y,G,Q,J,H,W,K,$,X,ee,es,et,ea,el,er,en;let[ei,ed]=(0,l.useState)(!1),[ec,eo]=(0,l.useState)(""),[em,ex]=(0,l.useState)(""),[eu,eh]=(0,l.useState)(""),[ep,eg]=(0,l.useState)(null),[ej,ef]=(0,l.useState)(2025),[eN,ev]=(0,l.useState)("BAC"),[eb,ey]=(0,l.useState)(!1),[ew,eC]=(0,l.useState)(0),[eE,eS]=(0,l.useState)(null),[eT,eD]=(0,l.useState)(null),[eA,eI]=(0,l.useState)(null),[ez,ek]=(0,l.useState)(null),[eR,eZ]=(0,l.useState)("upload"),[eO,eB]=(0,l.useState)(null),[eM,eU]=(0,l.useState)({}),[eF,eL]=(0,l.useState)(!1),[e_,eP]=(0,l.useState)([]),[eq,eV]=(0,l.useState)(null),[eY,eG]=(0,l.useState)(!1),[eQ,eJ]=(0,l.useState)(!1),[eH,eW]=(0,l.useState)(null),[eK,e$]=(0,l.useState)(null),[eX,e0]=(0,l.useState)("NONE"),[e2,e4]=(0,l.useState)(10),[e3,e1]=(0,l.useState)([]),[e5,e6]=(0,l.useState)([]),[e8,e7]=(0,l.useState)([]),[e9,se]=(0,l.useState)(!1),[ss,st]=(0,l.useState)(!1),sa=[2022,2023,2024,2025];(0,l.useEffect)(()=>{"true"===localStorage.getItem("adminAuthenticated")&&ed(!0)},[]),(0,l.useEffect)(()=>{ei&&(sm(),sn(),sh(),sp())},[ei]);let sl=async()=>{try{let e=await fetch("/api/test-upload"),s=await e.json();eD(s)}catch(e){eD({status:"ERROR",error:"Failed to connect to test endpoint",details:e instanceof Error?e.message:"Unknown error"})}},sr=async()=>{try{let e=await fetch("/api/admin/region-info"),s=await e.json();eI(s)}catch(e){eI({status:"ERROR",error:"Failed to get region info",details:e instanceof Error?e.message:"Unknown error"})}},sn=async()=>{try{let e=await fetch("/api/admin/database-info"),s=await e.json();ek(s)}catch(e){ek({status:"ERROR",error:"Failed to get database info",details:e instanceof Error?e.message:"Unknown error"})}},si=async()=>{if(!ep){eS({success:!1,message:"Aucun fichier s\xe9lectionn\xe9"});return}eL(!0),eS(null);try{let e=new FormData;e.append("excel",ep),e.append("examType",eN),console.log("\uD83D\uDCE4 Sending analysis request...");let s=await fetch("/api/admin/analyze-excel",{method:"POST",body:e}),t=await s.json();s.ok&&t.success?(eB(t),eU(t.suggestedMapping||{}),eZ("mapping"),console.log("\uD83C\uDF89 Analysis successful!")):(eS({success:!1,message:t.error||"\xc9chec de l'analyse du fichier Excel",details:t}),console.error("❌ Analysis failed:",t))}catch(e){console.error("\uD83D\uDCA5 Analysis error:",e),eS({success:!1,message:"Erreur lors de l'analyse du fichier. Veuillez r\xe9essayer.",details:e instanceof Error?e.message:"Unknown error"})}finally{eL(!1)}},sd=(e,s)=>{eU(t=>({...t,[e]:"__none__"===s?"":s}))},sc=async()=>{var e,s,t,a;if(!ep||!eO){eS({success:!1,message:"Fichier ou analyse manquante"});return}let l=null===(e=eO.requiredFields)||void 0===e?void 0:e.filter(e=>["matricule","nom_complet"].includes(e.field)||"BAC"===eN&&["section","moyenne","decision","ecole","etablissement"].includes(e.field)||"BREVET"===eN&&["moyenne","decision","ecole","etablissement"].includes(e.field)||"CONCOURS"===eN&&["score","ecole","etablissement"].includes(e.field)),r=null==l?void 0:l.filter(e=>!eM[e.field]);if(r.length>0){eS({success:!1,message:"Veuillez mapper les champs obligatoires: ".concat(null==r?void 0:r.map(e=>e.field).join(", "))});return}eZ("processing"),ey(!0),eC(0),eS(null);try{let e;let s=new FormData;s.append("excel",ep),s.append("year",ej.toString()),s.append("examType",eN),s.append("columnMapping",JSON.stringify(eM)),"BAC"===eN&&eK?(s.append("sessionType",eK),console.log("\uD83D\uDCCB Adding session type to form data: ".concat(eK))):"BAC"===eN&&console.log("⚠️ No session type selected for BAC exam type ".concat(eN," ").concat(ej)),"CONCOURS"===eN&&(s.append("threshold",e2.toString()),s.append("wilayaThresholds",JSON.stringify(e3)),console.log("\uD83D\uDCCB Adding threshold to form data: ".concat(e2)),console.log("\uD83D\uDCCB Adding wilaya thresholds:",e3)),console.log("\uD83D\uDCE4 Sending upload request with mapping..."),console.log("Column mapping:",eM);let t=setInterval(()=>{eC(e=>e>=90?(clearInterval(t),90):e+2)},1e3),a=new AbortController,l=setTimeout(()=>{a.abort(),console.log("⏰ Request aborted due to timeout")},28e4),r=await fetch("/api/admin/upload",{method:"POST",body:s,signal:a.signal});clearTimeout(l),clearInterval(t),eC(100),console.log("\uD83D\uDCE5 Response received:",{status:r.status,statusText:r.statusText});try{let s=await r.text();console.log("\uD83D\uDCE5 Raw response:",s.substring(0,500)+"..."),e=JSON.parse(s)}catch(e){throw console.error("❌ Failed to parse response:",e),Error("Invalid response from server")}console.log("\uD83D\uDCE5 Parsed response:",e),r.ok?(eS({success:!0,message:e.message,stats:e.stats,details:{...e.fileInfo}}),console.log("\uD83C\uDF89 Upload successful!"),sn(),setTimeout(()=>{eZ("upload"),eB(null),eU({}),eg(null)},5e3)):(eS({success:!1,message:e.error||"Erreur HTTP ".concat(r.status,": ").concat(r.statusText),details:e}),console.error("❌ Upload failed:",e))}catch(r){console.error("\uD83D\uDCA5 Upload error:",r);let e="Erreur lors du t\xe9l\xe9chargement",l={};r instanceof Error&&(l.errorName=r.name,l.errorMessage=r.message,e="AbortError"===r.name?"Timeout: Le t\xe9l\xe9chargement a pris trop de temps. V\xe9rifiez si les donn\xe9es ont \xe9t\xe9 sauvegard\xe9es en actualisant les infos de la base de donn\xe9es.":(null===(s=r.message)||void 0===s?void 0:s.includes("fetch"))?"Erreur de connexion. V\xe9rifiez votre connexion internet et r\xe9essayez.":(null===(t=r.message)||void 0===t?void 0:t.includes("multipart"))?"Erreur de format de fichier. Veuillez r\xe9essayer.":(null===(a=r.message)||void 0===a?void 0:a.includes("database"))?"Erreur de base de donn\xe9es. Veuillez r\xe9essayer.":"Erreur: ".concat(r.message)),eS({success:!1,message:e,details:l}),r instanceof Error&&"AbortError"===r.name&&(console.log("\uD83D\uDD04 Timeout detected, refreshing database info..."),setTimeout(()=>{sn()},2e3))}finally{ey(!1),setTimeout(()=>eC(0),3e3)}},so=async()=>{if(confirm("\xcates-vous s\xfbr de vouloir effacer toutes les donn\xe9es des \xe9tudiants pour ".concat(eN," ").concat(ej," ? Cette action ne peut pas \xeatre annul\xe9e.")))try{let e=await fetch("/api/admin/clear?year=".concat(ej,"&examType=").concat(eN),{method:"DELETE"}),s=await e.json();e.ok?(eS({success:!0,message:s.message,details:{deletedRecords:s.deletedCount}}),sn()):eS({success:!1,message:s.error||"\xc9chec de l'effacement des donn\xe9es"})}catch(e){console.error("Clear data error:",e),eS({success:!1,message:"Erreur r\xe9seau lors de l'effacement"})}},sm=async()=>{eJ(!0);try{let e=await fetch("/api/admin/files"),s=await e.json();eP(s.files||[])}catch(e){console.error("Error fetching files:",e),eP([])}finally{eJ(!1)}},sx=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce fichier ? Cette action ne peut pas \xeatre annul\xe9e.")){eW(e);try{console.log("\uD83D\uDDD1️ Attempting to delete file:",e);let s=await fetch("/api/admin/files/".concat(encodeURIComponent(e)),{method:"DELETE"});console.log("\uD83D\uDDD1️ Delete response status:",s.status);let t=await s.json();console.log("\uD83D\uDDD1️ Delete response:",t),s.ok&&t.success?(eS({success:!0,message:t.message,details:t.deletedFile}),sm(),sn()):(console.error("Delete failed:",t),eS({success:!1,message:t.error||"\xc9chec de la suppression du fichier"}))}catch(e){console.error("Delete file error:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la suppression"})}finally{eW(null)}}},su=async e=>{try{let s=await fetch("/api/admin/files/".concat(encodeURIComponent(e))),t=await s.json();s.ok&&t.success?(eV(t.file),eG(!0)):(console.error("Error fetching file details:",t.error||"Unknown error"),eS({success:!1,message:t.error||"Erreur lors de la r\xe9cup\xe9ration des d\xe9tails du fichier"}))}catch(e){console.error("Error fetching file details:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la r\xe9cup\xe9ration des d\xe9tails du fichier"})}},sh=async()=>{try{let e=await fetch("/api/admin/exam-types"),s=await e.json();s.success&&e6(s.examTypes)}catch(e){console.error("Error fetching exam types:",e)}},sp=async()=>{try{let e=await fetch("/api/admin/slider-images"),s=await e.json();s.success&&e7(s.sliderImages)}catch(e){console.error("Error fetching slider images:",e)}},sg=async e=>{console.log("createExamType called with:",e);try{let s=await fetch("/api/admin/exam-types",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();console.log("API response:",t),t.success?(eS({success:!0,message:"Type d'examen cr\xe9\xe9 avec succ\xe8s"}),sh()):eS({success:!1,message:t.error||"Erreur lors de la cr\xe9ation du type d'examen"})}catch(e){console.error("Error creating exam type:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la cr\xe9ation du type d'examen"})}},sj=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce type d'examen ? Cette action ne peut pas \xeatre annul\xe9e."))try{let s=await fetch("/api/admin/exam-types/".concat(e),{method:"DELETE"}),t=await s.json();t.success?(eS({success:!0,message:"Type d'examen supprim\xe9 avec succ\xe8s"}),sh()):eS({success:!1,message:t.error||"Erreur lors de la suppression du type d'examen"})}catch(e){console.error("Error deleting exam type:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la suppression du type d'examen"})}},sf=async e=>{try{let s=await fetch("/api/admin/exam-types/".concat(e,"/set-default"),{method:"PATCH"}),t=await s.json();t.success?(eS({success:!0,message:"Type d'examen d\xe9fini par d\xe9faut avec succ\xe8s"}),sh()):eS({success:!1,message:t.error||"Erreur lors de la d\xe9finition du type d'examen par d\xe9faut"})}catch(e){console.error("Error setting default exam type:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la d\xe9finition du type d'examen par d\xe9faut"})}},sN=async e=>{try{let s=await fetch("/api/admin/slider-images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();t.success?(eS({success:!0,message:"Image du slider cr\xe9\xe9e avec succ\xe8s"}),sp()):eS({success:!1,message:t.error||"Erreur lors de la cr\xe9ation de l'image"})}catch(e){console.error("Error creating slider image:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la cr\xe9ation de l'image"})}},sv=async(e,s)=>{try{let t=await fetch("/api/admin/slider-images/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await t.json();a.success?(eS({success:!0,message:"Image du slider mise \xe0 jour avec succ\xe8s"}),sp()):eS({success:!1,message:a.error||"Erreur lors de la mise \xe0 jour de l'image"})}catch(e){console.error("Error updating slider image:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la mise \xe0 jour de l'image"})}},sb=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cette image du slider ?"))try{let s=await fetch("/api/admin/slider-images/".concat(e),{method:"DELETE"}),t=await s.json();t.success?(eS({success:!0,message:"Image du slider supprim\xe9e avec succ\xe8s"}),sp()):eS({success:!1,message:t.error||"Erreur lors de la suppression de l'image"})}catch(e){console.error("Error deleting slider image:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la suppression de l'image"})}},sy=async(e,s)=>{try{let t=await fetch("/api/admin/slider-images/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!s})}),a=await t.json();a.success?(eS({success:!0,message:"Image ".concat(s?"d\xe9sactiv\xe9e":"activ\xe9e"," avec succ\xe8s")}),sp()):eS({success:!1,message:a.error||"Erreur lors de la modification du statut"})}catch(e){console.error("Error toggling slider image status:",e),eS({success:!1,message:"Erreur r\xe9seau lors de la modification du statut"})}};return(console.log(eE),ei)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8 sm:mb-12",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-4 space-y-4 lg:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center lg:justify-start",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 sm:h-10 sm:w-10 lg:h-12 lg:w-12 text-blue-600 mr-2 sm:mr-3"}),(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"Dashboard Admin"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3",children:[(0,a.jsxs)(k.z,{onClick:sl,variant:"outline",size:"sm",className:"border-green-300 text-green-600 hover:bg-green-50 bg-transparent text-xs sm:text-sm",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Test API"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Test"})]}),(0,a.jsxs)(k.z,{onClick:sr,variant:"outline",size:"sm",className:"border-blue-300 text-blue-600 hover:bg-blue-50 bg-transparent text-xs sm:text-sm",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Info R\xe9gion"}),(0,a.jsx)("span",{className:"sm:hidden",children:"R\xe9gion"})]}),(0,a.jsxs)(k.z,{onClick:sn,variant:"outline",size:"sm",className:"border-purple-300 text-purple-600 hover:bg-purple-50 bg-transparent text-xs sm:text-sm",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Database"}),(0,a.jsx)("span",{className:"sm:hidden",children:"DB"})]}),(0,a.jsxs)(k.z,{onClick:()=>{ed(!1),localStorage.removeItem("adminAuthenticated"),eo(""),ex(""),eZ("upload"),eB(null),eU({}),eg(null)},variant:"outline",size:"sm",className:"border-red-300 text-red-600 hover:bg-red-50 bg-transparent text-xs sm:text-sm",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"D\xe9connexion"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Exit"})]})]})]}),(0,a.jsx)("p",{className:"text-base sm:text-lg lg:text-xl text-gray-600 px-4 sm:px-0",children:"T\xe9l\xe9charger et g\xe9rer les donn\xe9es des r\xe9sultats avec PostgreSQL Database"})]}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6 sm:space-y-8",children:[ez&&(0,a.jsxs)(R.Zb,{className:"shadow-lg ".concat("SUCCESS"===ez.status?"border-purple-200":"border-red-200"),children:[(0,a.jsx)(R.Ol,{children:(0,a.jsxs)(R.ll,{className:"flex items-center text-lg sm:text-xl lg:text-2xl ".concat("SUCCESS"===ez.status?"text-purple-700":"text-red-700"),children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),"Informations de la Base de Donn\xe9es"]})}),(0,a.jsxs)(R.aY,{children:["SUCCESS"===ez.status&&ez.summary&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg border border-purple-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-purple-600 font-medium",children:"Total \xc9tudiants"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-purple-700",children:ez.summary.totalStudents})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:"Total Uploads"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl font-bold text-blue-700",children:ez.summary.totalUploads})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-green-600 font-medium",children:"Ann\xe9es/Types"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-700",children:ez.summary.distinctYearTypes})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-3 sm:p-4 rounded-lg border border-orange-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-orange-600 font-medium",children:"Records Totaux"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-orange-700",children:ez.summary.totalDataSize})]})]}),Object.keys(ez.data).length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-4",children:"Donn\xe9es par Ann\xe9e et Type:"}),(0,a.jsx)("div",{className:"grid gap-4",children:null===(e=Object.entries(ez.data))||void 0===e?void 0:e.map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-800",children:s}),(0,a.jsxs)(Z.C,{variant:"secondary",children:[t.studentCount," \xe9tudiants"]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Moyenne g\xe9n\xe9rale:"})," ",t.averageScore,"/20"]}),t.uploadInfo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Fichier:"})," ",t.uploadInfo.fileName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Upload\xe9 le:"})," ",new Date(t.uploadInfo.uploadedAt).toLocaleString()]})]})]})]},s)})})]}),ez.recentUploads&&ez.recentUploads.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-4",children:"Uploads R\xe9cents:"}),(0,a.jsx)("div",{className:"space-y-2",children:null===(s=ez.recentUploads.slice(0,5))||void 0===s?void 0:s.map(e=>(0,a.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.fileName}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.examType," ",e.year," -"," ",e.studentCount," \xe9tudiants"]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.uploadedAt).toLocaleDateString()})]},e.id))})]})]}),ez.error&&(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[(0,a.jsxs)("p",{className:"text-red-600",children:[(0,a.jsx)("strong",{children:"Erreur:"})," ",ez.error]}),(0,a.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:["Configur\xe9: ",ez.configured?"Oui":"Non"]})]})]})]}),(0,a.jsxs)(R.Zb,{className:"shadow-lg border-indigo-200",children:[(0,a.jsxs)(R.Ol,{children:[(0,a.jsxs)(R.ll,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-lg sm:text-xl lg:text-2xl text-indigo-700 space-y-3 sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),"Gestion des Fichiers Upload\xe9s"]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(k.z,{onClick:async()=>{try{await fetch("/api/admin/clear-cache",{method:"POST"}),eS({success:!0,message:"Cache supprim\xe9 avec succ\xe8s"})}catch(e){eS({success:!1,message:"Erreur lors de la suppression du cache"})}},variant:"outline",size:"sm",className:"border-orange-300 text-orange-600 hover:bg-orange-50 text-xs sm:text-sm",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Vider Cache"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Cache"})]}),(0,a.jsxs)(k.z,{onClick:sm,disabled:eQ,variant:"outline",size:"sm",className:"border-indigo-300 text-indigo-600 hover:bg-indigo-50 bg-transparent text-xs sm:text-sm",children:[eQ?(0,a.jsx)(x.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 animate-spin"}):(0,a.jsx)(x.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Actualiser"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Refresh"})]})]})]}),(0,a.jsx)(R.SZ,{className:"text-sm sm:text-base",children:"Voir tous les fichiers upload\xe9s, d\xe9tecter les doublons et g\xe9rer les donn\xe9es."})]}),(0,a.jsx)(R.aY,{children:eQ?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(x.Z,{className:"h-6 w-6 animate-spin mr-2"}),(0,a.jsx)("span",{children:"Chargement des fichiers..."})]}):0===e_.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(m.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:'Aucun fichier trouv\xe9. Cliquez sur "Actualiser" pour recharger.'})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-indigo-50 p-3 sm:p-4 rounded-lg border border-indigo-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-indigo-600 font-medium",children:"Total Fichiers"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-indigo-700",children:e_.length})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:"Total \xc9tudiants"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-700",children:e_.reduce((e,s)=>e+s.studentCount,0)})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-3 sm:p-4 rounded-lg border border-orange-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-orange-600 font-medium",children:"Doublons D\xe9tect\xe9s"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-orange-700",children:e_.reduce((e,s)=>e+(s.duplicateCount||0),0)})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-green-600 font-medium",children:"Taille Totale"}),(0,a.jsxs)("p",{className:"text-sm sm:text-base lg:text-lg font-bold text-green-700",children:[e_.reduce((e,s)=>e+.5*s.studentCount,0).toFixed(0)," ","KB"]})]})]}),(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(q.iA,{children:[(0,a.jsx)(q.xD,{children:(0,a.jsxs)(q.SC,{children:[(0,a.jsx)(q.ss,{children:"Fichier"}),(0,a.jsx)(q.ss,{children:"Ann\xe9e/Type"}),(0,a.jsx)(q.ss,{children:"\xc9tudiants"}),(0,a.jsx)(q.ss,{children:"Doublons"}),(0,a.jsx)(q.ss,{children:"Taux Admission"}),(0,a.jsx)(q.ss,{children:"Taille"}),(0,a.jsx)(q.ss,{children:"Date Upload"}),(0,a.jsx)(q.ss,{children:"Actions"})]})}),(0,a.jsx)(q.RM,{children:null==e_?void 0:e_.map(e=>(0,a.jsxs)(q.SC,{children:[(0,a.jsx)(q.pj,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.fileName}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.id})]})]})}),(0,a.jsx)(q.pj,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(Z.C,{variant:"outline",children:[e.examType," ",e.year]}),e.sessionType&&(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"NORMALE"===e.sessionType?"Session Normale":"COMPLEMENTAIRE"===e.sessionType?"Session Compl\xe9mentaire":e.sessionType})]})}),(0,a.jsx)(q.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium",children:e.studentCount}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.uniqueStudents," uniques"]})]})}),(0,a.jsx)(q.pj,{children:e.duplicateCount>0?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-orange-500 mr-1"}),(0,a.jsx)("span",{className:"text-orange-600 font-medium",children:e.duplicateCount})]}):(0,a.jsx)("span",{className:"text-green-600",children:"✓ Aucun"})}),(0,a.jsx)(q.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{className:"font-medium",children:[e.admissionRate,"%"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.admittedCount,"/",e.studentCount]})]})}),(0,a.jsx)(q.pj,{className:"text-sm",children:e.sizeFormatted}),(0,a.jsx)(q.pj,{className:"text-sm",children:new Date(e.uploadedAt).toLocaleDateString()}),(0,a.jsx)(q.pj,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(k.z,{onClick:()=>su(e.id),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:(0,a.jsx)(h.Z,{className:"h-3 w-3"})}),(0,a.jsx)(k.z,{onClick:()=>sx(e.id),disabled:eH===e.id,size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-red-300 text-red-600 hover:bg-red-50",children:eH===e.id?(0,a.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(p.Z,{className:"h-3 w-3"})})]})})]},e.id))})]})})}),(0,a.jsx)("div",{className:"lg:hidden space-y-4",children:null==e_?void 0:e_.map(e=>(0,a.jsx)(R.Zb,{className:"border border-gray-200",children:(0,a.jsx)(R.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(Z.C,{variant:"outline",className:"text-xs",children:[e.examType," ",e.year]}),e.sessionType&&(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"NORMALE"===e.sessionType?"Session Normale":"COMPLEMENTAIRE"===e.sessionType?"Session Compl\xe9mentaire":e.sessionType})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(k.z,{onClick:()=>su(e.id),size:"sm",variant:"outline",className:"h-7 w-7 p-0",children:(0,a.jsx)(h.Z,{className:"h-3 w-3"})}),(0,a.jsx)(k.z,{onClick:()=>sx(e.id),disabled:eH===e.id,size:"sm",variant:"outline",className:"h-7 w-7 p-0 border-red-300 text-red-600 hover:bg-red-50",children:eH===e.id?(0,a.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(p.Z,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 break-all",children:e.fileName}),(0,a.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:e.id})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"\xc9tudiants"}),(0,a.jsx)("p",{className:"font-medium",children:e.studentCount}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.uniqueStudents," uniques"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"Admission"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.admissionRate,"%"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.admittedCount,"/",e.studentCount]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"Doublons"}),e.duplicateCount>0?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3 text-orange-500 mr-1"}),(0,a.jsx)("span",{className:"text-orange-600 font-medium text-sm",children:e.duplicateCount})]}):(0,a.jsx)("span",{className:"text-green-600 text-sm",children:"✓ Aucun"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"Taille"}),(0,a.jsx)("p",{className:"font-medium",children:e.sizeFormatted}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.uploadedAt).toLocaleDateString()})]})]})]})})},e.id))})]})})]}),eY&&eq&&(0,a.jsxs)(R.Zb,{className:"shadow-lg border-blue-200 mt-8",children:[(0,a.jsx)(R.Ol,{children:(0,a.jsxs)(R.ll,{className:"flex items-center justify-between text-xl text-blue-700",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"D\xe9tails du Fichier"]}),(0,a.jsx)(k.z,{onClick:()=>eG(!1),variant:"outline",size:"sm",children:"Fermer"})]})}),(0,a.jsx)(R.aY,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Informations du fichier"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",eq.file.id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Taille:"})," ",(eq.file.size/1024/1024).toFixed(2)," MB"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Upload\xe9:"})," ",new Date(eq.file.uploadedAt).toLocaleString()]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"\xc9tudiants:"})," ",eq.file.studentCount]})]})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-orange-800 mb-2",children:"Analyse des doublons"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total doublons:"})," ",eq.duplicates.totalDuplicates]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Groupes de doublons:"})," ",eq.duplicates.totalGroups]})]})]})]}),eq.duplicates.duplicateGroups.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-800 mb-4",children:["Groupes de doublons (premiers"," ",Math.min(10,eq.duplicates.duplicateGroups.length),")"]}),(0,a.jsx)("div",{className:"space-y-3",children:null===(t=eq.duplicates.duplicateGroups.slice(0,10))||void 0===t?void 0:t.map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("p",{className:"font-medium text-red-800",children:["Matricule: ",e.matricule]}),(0,a.jsxs)(Z.C,{variant:"destructive",children:[e.count," copies"]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[null===(t=e.students.slice(0,3))||void 0===t?void 0:t.map((e,s)=>(0,a.jsxs)("div",{className:"text-xs bg-white p-2 rounded border",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nom:"})," ",e.nom_complet]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"\xc9cole:"})," ",e.ecole]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Moyenne:"})," ",e.moyenne]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"D\xe9cision:"})," ",e.decision_text]})]},s)),e.students.length>3&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["... et ",e.students.length-3," autres copies"]})]})]},s)})})]}),eq.students&&eq.students.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-4",children:"Aper\xe7u des \xe9tudiants (premiers 10)"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(q.iA,{children:[(0,a.jsx)(q.xD,{children:(0,a.jsxs)(q.SC,{children:[(0,a.jsx)(q.ss,{children:"Matricule"}),(0,a.jsx)(q.ss,{children:"Nom"}),(0,a.jsx)(q.ss,{children:"\xc9cole"}),(0,a.jsx)(q.ss,{children:"Moyenne"}),(0,a.jsx)(q.ss,{children:"D\xe9cision"})]})}),(0,a.jsx)(q.RM,{children:null===(O=eq.students.slice(0,10))||void 0===O?void 0:O.map((e,s)=>(0,a.jsxs)(q.SC,{children:[(0,a.jsx)(q.pj,{className:"font-mono text-xs",children:e.matricule}),(0,a.jsx)(q.pj,{className:"text-sm",children:e.nom_complet}),(0,a.jsx)(q.pj,{className:"text-sm",children:e.ecole}),(0,a.jsx)(q.pj,{className:"text-sm",children:e.moyenne}),(0,a.jsx)(q.pj,{children:(0,a.jsx)(Z.C,{variant:e.admis?"default":"secondary",children:e.decision_text})})]},s))})]})})]})]})})]}),eA&&(0,a.jsxs)(R.Zb,{className:"shadow-lg ".concat("SUCCESS"===eA.status?"border-blue-200":"border-red-200"),children:[(0,a.jsx)(R.Ol,{children:(0,a.jsxs)(R.ll,{className:"flex items-center text-lg sm:text-xl lg:text-2xl ".concat("SUCCESS"===eA.status?"text-blue-700":"text-red-700"),children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),"Informations de R\xe9gion et Environnement"]})}),(0,a.jsxs)(R.aY,{children:["SUCCESS"===eA.status&&eA.data&&(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Vercel"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"R\xe9gion:"})," ",eA.data.vercelRegion]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Environnement:"})," ",eA.data.vercelEnv]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"URL:"})," ",eA.data.vercelUrl]})]})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-orange-800 mb-2",children:"AWS Lambda"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"R\xe9gion AWS:"})," ",eA.data.awsRegion]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"M\xe9moire:"})," ",eA.data.lambdaMemorySize,"MB"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Runtime:"})," ",eA.data.awsExecutionEnv]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"Syst\xe8me"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Node.js:"})," ",eA.data.nodeVersion]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Plateforme:"})," ",eA.data.platform]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Architecture:"})," ",eA.data.architecture]})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg border border-purple-200 sm:col-span-2 lg:col-span-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-purple-800 mb-2 text-sm sm:text-base",children:"Utilisation M\xe9moire"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"RSS:"})," ",Math.round(eA.data.memoryUsage.rss/1024/1024),"MB"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Heap Total:"})," ",Math.round(eA.data.memoryUsage.heapTotal/1024/1024),"MB"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Heap Used:"})," ",Math.round(eA.data.memoryUsage.heapUsed/1024/1024),"MB"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"External:"})," ",Math.round(eA.data.memoryUsage.external/1024/1024),"MB"]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg border border-gray-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-2 text-sm sm:text-base",children:"Temps"}),(0,a.jsxs)("div",{className:"space-y-1 text-xs sm:text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Timezone:"})," ",eA.data.timezone]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Uptime:"})," ",Math.round(eA.data.uptime),"s"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Timestamp:"})," ",new Date(eA.data.timestamp).toLocaleDateString()]})]})]})]}),eA.error&&(0,a.jsx)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:(0,a.jsxs)("p",{className:"text-red-600",children:[(0,a.jsx)("strong",{children:"Erreur:"})," ",eA.error]})})]})]}),eT&&(0,a.jsxs)(R.Zb,{className:"shadow-lg ".concat("OK"===eT.status?"border-green-200":"border-red-200"),children:[(0,a.jsx)(R.Ol,{children:(0,a.jsxs)(R.ll,{className:"flex items-center ".concat("OK"===eT.status?"text-green-700":"text-red-700"),children:[(0,a.jsx)(d.Z,{className:"h-6 w-6 mr-2"}),"Test de Connexion API"]})}),(0,a.jsx)(R.aY,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",eT.status]}),eT.tests&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Environment:"})," ",eT.tests.environment]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Region:"})," ",eT.tests.vercelRegion]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Memory:"})," ",JSON.stringify(eT.tests.memoryUsage)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Runtime:"})," ",eT.tests.runtime]})]}),eT.error&&(0,a.jsxs)("p",{className:"text-red-600",children:[(0,a.jsx)("strong",{children:"Erreur:"})," ",eT.error]})]})})]}),(0,a.jsxs)(R.Zb,{className:"shadow-lg border-primary-200",children:[(0,a.jsxs)(R.Ol,{children:[(0,a.jsxs)(R.ll,{className:"flex items-center text-lg sm:text-xl lg:text-2xl text-primary-700",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),"S\xe9lectionner l'Ann\xe9e et le Type d'Examen"]}),(0,a.jsx)(R.SZ,{className:"text-sm sm:text-base",children:"Choisissez l'ann\xe9e et le type d'examen pour lesquels vous souhaitez t\xe9l\xe9charger ou g\xe9rer les donn\xe9es."})]}),(0,a.jsxs)(R.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{htmlFor:"year-select",className:"text-sm font-medium text-gray-700",children:"Ann\xe9e"}),(0,a.jsxs)(U.Ph,{value:ej.toString(),onValueChange:e=>ef(Number.parseInt(e)),children:[(0,a.jsx)(U.i4,{className:"w-full border-primary-300 focus:border-primary-500 focus:outline-none",children:(0,a.jsx)(U.ki,{placeholder:"Choisir une ann\xe9e..."})}),(0,a.jsx)(U.Bw,{children:null==sa?void 0:sa.map(e=>(0,a.jsx)(U.Ql,{value:e.toString(),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{htmlFor:"exam-type-select",className:"text-sm font-medium text-gray-700",children:"Type d'Examen"}),(0,a.jsxs)(U.Ph,{value:"".concat(eN,"-").concat(eK||"NONE","-").concat(ej),onValueChange:e=>{let[s,t,a]=e.split("-");ev(s),e$("NONE"===t?null:t),ef(Number.parseInt(a))},children:[(0,a.jsx)(U.i4,{className:"w-full border-primary-300 focus:border-primary-500 focus:outline-none",children:(0,a.jsx)(U.ki,{placeholder:"Choisir un type..."})}),(0,a.jsx)(U.Bw,{children:null==e5?void 0:e5.map(e=>(0,a.jsxs)(U.Ql,{value:"".concat(e.code,"-").concat(e.sessionType||"NONE","-").concat(e.year),children:[e.name," (",e.year,")",e.sessionType?" - ".concat("NORMALE"===e.sessionType?"Session Normale":"COMPLEMENTAIRE"===e.sessionType?"Session Compl\xe9mentaire":"Aucune session"):""]},"".concat(e.code,"-").concat(e.sessionType,"-").concat(e.year)))})]})]}),"BAC"===eN&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{htmlFor:"session-type-select",className:"text-sm font-medium text-gray-700",children:"Type de Session"}),(()=>{let e=e5.find(e=>e.code===eN&&e.year===ej),s=null==e?void 0:e.sessionType;return s?(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-800",children:["Session automatiquement d\xe9finie: ",s]})]}),(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["D\xe9finie dans le type d'examen \"",e.name,'"']})]}):(0,a.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-yellow-800",children:"Aucune session d\xe9finie"})]}),(0,a.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"Veuillez s\xe9lectionner un type d'examen BAC avec session d\xe9finie"})]})})()]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-primary-50 rounded-lg border border-primary-200",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600 text-center sm:text-left",children:["S\xe9lection actuelle:"," ",(0,a.jsxs)("span",{className:"font-semibold text-primary-600",children:[eN," ",ej,eK&&(()=>{let e="NORMALE"===eK?"Session Normale":"COMPLEMENTAIRE"===eK?"Session Compl\xe9mentaire":eK;return" - ".concat(e)})()]})]})})]})]}),(0,a.jsxs)(R.Zb,{className:"shadow-lg border-blue-200",children:[(0,a.jsxs)(R.Ol,{children:[(0,a.jsxs)(R.ll,{className:"flex flex-col sm:flex-row sm:items-center text-lg sm:text-xl lg:text-2xl text-blue-700 space-y-2 sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),(0,a.jsxs)("span",{children:["T\xe9l\xe9charger Excel - ",eN," ",ej,eK&&" - ".concat("NORMALE"===eK?"Session Normale":"Session Compl\xe9mentaire")]})]}),"mapping"===eR&&(0,a.jsx)(Z.C,{variant:"secondary",className:"sm:ml-2 self-start sm:self-center",children:"\xc9tape 2/3: Mappage"}),"processing"===eR&&(0,a.jsx)(Z.C,{variant:"secondary",className:"sm:ml-2 self-start sm:self-center",children:"\xc9tape 3/3: Traitement"})]}),(0,a.jsxs)(R.SZ,{className:"text-sm sm:text-base",children:["upload"===eR&&(0,a.jsxs)(a.Fragment,{children:["T\xe9l\xe9chargez votre fichier RES-",eN,"-",ej,"-FINALE.xlsx contenant les r\xe9sultats des \xe9tudiants. ",(0,a.jsx)("strong",{children:"Stockage: PostgreSQL Database"})]}),"mapping"===eR&&(0,a.jsx)(a.Fragment,{children:"Mappez les colonnes de votre fichier Excel aux champs requis. Les suggestions automatiques sont bas\xe9es sur les noms de colonnes courants."}),"processing"===eR&&(0,a.jsx)(a.Fragment,{children:"Traitement et stockage des donn\xe9es en cours. Veuillez patienter..."})]})]}),(0,a.jsxs)(R.aY,{className:"space-y-4 sm:space-y-6",children:["upload"===eR&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-4 sm:p-6 lg:p-8 text-center hover:border-blue-400 transition-colors bg-blue-50",children:[(0,a.jsx)(N.Z,{className:"h-8 w-8 sm:h-10 sm:w-10 lg:h-12 lg:w-12 text-blue-400 mx-auto mb-4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-base sm:text-lg font-medium text-gray-700",children:ep?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-green-600",children:"✓"})," ",(0,a.jsx)("span",{className:"break-all",children:ep.name})," (",(ep.size/1024/1024).toFixed(2),"MB)"]}):"Choisir un fichier Excel"}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 px-2",children:["Supporte les fichiers .xlsx et .xls (Maximum 4MB)",(0,a.jsx)("br",{className:"hidden sm:block"}),(0,a.jsx)("span",{className:"block sm:inline",children:"Types MIME accept\xe9s: Excel, application/octet-stream"}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"\uD83D\uDCE6 Stockage: Base de donn\xe9es PostgreSQL"})]})]}),(0,a.jsx)("input",{type:"file",accept:".xlsx,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/octet-stream",onChange:e=>{var s,t;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){if(eS(null),eB(null),eU({}),eZ("upload"),a.size>52428800){eS({success:!1,message:"Fichier trop volumineux. Taille maximum: 50MB. Votre fichier: ".concat((a.size/1024/1024).toFixed(2),"MB")});return}let e=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","application/octet-stream",".xlsx",".xls"],s=null===(t=a.name)||void 0===t?void 0:t.toLowerCase(),l=s.endsWith(".xlsx")||s.endsWith(".xls"),r=null==e?void 0:e.includes(a.type);if(console.log("File validation:",{name:a.name,type:a.type,size:a.size,hasValidExtension:l,hasValidMimeType:r}),!l&&!r){eS({success:!1,message:"Type de fichier invalide. Veuillez s\xe9lectionner un fichier Excel (.xlsx ou .xls). \n                   Fichier re\xe7u: ".concat(a.name," (").concat(a.type,")"),details:{fileName:a.name,mimeType:a.type,validTypes:e}});return}eg(a),console.log("File selected successfully:",{name:a.name,size:a.size,type:a.type})}},className:"mt-4 block w-full text-xs sm:text-sm text-gray-500 file:mr-2 sm:file:mr-4 file:py-1 sm:file:py-2 file:px-2 sm:file:px-4 file:rounded-full file:border-0 file:text-xs sm:file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 focus:outline-none"})]}),(0,a.jsx)("div",{className:"space-y-3 sm:space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(k.z,{onClick:si,disabled:!ep||eF,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-sm sm:text-base",children:eF?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2 animate-spin"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Analyse en cours..."}),(0,a.jsx)("span",{className:"sm:hidden",children:"Analyse..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Analyser le fichier Excel"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Analyser Excel"})]})}),(0,a.jsxs)(k.z,{onClick:so,variant:"destructive",disabled:eF,className:"text-sm sm:text-base",children:[(0,a.jsx)(p.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),(0,a.jsxs)("span",{className:"hidden sm:inline",children:["Effacer ",eN," ",ej]}),(0,a.jsx)("span",{className:"sm:hidden",children:"Effacer"})]})]})})]}),"mapping"===eR&&eO&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-800 mb-2 text-sm sm:text-base",children:"Fichier analys\xe9:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 text-xs sm:text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nom:"})," ",(0,a.jsx)("span",{className:"break-all",children:eO.fileName})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Taille:"})," ",(eO.fileSize/1024/1024).toFixed(2),"MB"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Lignes:"})," ",eO.totalRows]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Colonnes:"})," ",eO.columns.length]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:"Mappage des colonnes:"}),(0,a.jsx)("div",{className:"grid gap-3 sm:gap-4",children:null===(B=eO.requiredFields)||void 0===B?void 0:B.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 sm:gap-4 items-start p-3 sm:p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(P,{className:"font-medium text-gray-700 text-sm sm:text-base",children:e.field}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description}),["matricule","nom_complet"].includes(e.field)||"BAC"===eN&&["section","moyenne","decision","ecole","etablissement"].includes(e.field)||"BREVET"===eN&&["moyenne","decision","ecole","etablissement"].includes(e.field)||"CONCOURS"===eN&&["score","ecole","etablissement"].includes(e.field)?(0,a.jsx)(Z.C,{variant:"destructive",className:"mt-1 text-xs",children:"Obligatoire"}):(0,a.jsx)(Z.C,{variant:"secondary",className:"mt-1 text-xs",children:"Optionnel"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(U.Ph,{value:eM[e.field]||"__none__",onValueChange:s=>sd(e.field,s),children:[(0,a.jsx)(U.i4,{className:"w-full text-sm",children:(0,a.jsx)(U.ki,{placeholder:"S\xe9lectionner une colonne..."})}),(0,a.jsxs)(U.Bw,{children:[(0,a.jsx)(U.Ql,{value:"__none__",children:"-- Aucune --"}),null===(s=eO.columns)||void 0===s?void 0:s.map(e=>(0,a.jsx)(U.Ql,{value:e,children:e},e))]})]})}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-gray-600",children:eM[e.field]&&(0,a.jsxs)("div",{className:"bg-white p-2 rounded border",children:[(0,a.jsx)("strong",{children:"Exemple:"})," ",(0,a.jsx)("span",{className:"break-all",children:(null===(t=eO.sampleData[0])||void 0===t?void 0:t[eM[e.field]])||"N/A"})]})})]},e.field)})})]}),"CONCOURS"===eN&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:"Param\xe8tres de seuil pour CONCOURS:"}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("h5",{className:"font-medium text-blue-800",children:"Seuil global"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(P,{htmlFor:"global-threshold",className:"text-sm text-blue-700",children:"Seuil minimum (pour tous les wilayas)"}),(0,a.jsx)(F.I,{id:"global-threshold",type:"number",min:"0",max:"20",step:"0.01",value:e2,onChange:e=>e4(parseFloat(e.target.value)),placeholder:"10.0",className:"mt-1"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:["Les \xe9tudiants avec un score ≥ ",e2," seront consid\xe9r\xe9s comme admis"]})})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("h5",{className:"font-medium text-green-800",children:"Seuils par wilaya (optionnel)"})]}),(0,a.jsxs)(k.z,{variant:"outline",size:"sm",onClick:()=>e1([...e3,{wilaya:"",threshold:e2}]),className:"text-xs",children:[(0,a.jsx)(b.Z,{className:"h-3 w-3 mr-1"}),"Ajouter wilaya"]})]}),e3.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e3.map((e,s)=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(P,{className:"text-sm text-green-700",children:"Wilaya"}),(0,a.jsx)(F.I,{value:e.wilaya,onChange:e=>{let t=[...e3];t[s].wilaya=e.target.value,e1(t)},placeholder:"Nom du wilaya",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(P,{className:"text-sm text-green-700",children:"Seuil"}),(0,a.jsx)(F.I,{type:"number",min:"0",max:"20",step:"0.01",value:e.threshold,onChange:e=>{let t=[...e3];t[s].threshold=parseFloat(e.target.value),e1(t)},placeholder:"10.0",className:"mt-1"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(k.z,{variant:"outline",size:"sm",onClick:()=>{e1(e3.filter((e,t)=>t!==s))},className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(p.Z,{className:"h-3 w-3"})})})]},s))}):(0,a.jsx)("p",{className:"text-sm text-green-600",children:"Aucun seuil sp\xe9cifique par wilaya d\xe9fini. Le seuil global sera utilis\xe9."})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:"Aper\xe7u des donn\xe9es (3 premi\xe8res lignes):"}),(0,a.jsx)("div",{className:"lg:hidden space-y-3",children:null===(L=eO.sampleData)||void 0===L?void 0:L.slice(0,3).map((e,s)=>(0,a.jsx)(R.Zb,{className:"border border-gray-200",children:(0,a.jsx)(R.aY,{className:"p-3",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500 font-medium",children:["Ligne ",s+1]}),eO.columns.slice(0,6).map(s=>(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-600 truncate mr-2",children:[s,":"]}),(0,a.jsx)("span",{className:"text-gray-900 break-all",children:e[s]||""})]},s)),eO.columns.length>6&&(0,a.jsxs)("p",{className:"text-xs text-gray-400 text-center",children:["... et ",eO.columns.length-6," ","autres colonnes"]})]})})},s))}),(0,a.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,a.jsxs)(q.iA,{children:[(0,a.jsx)(q.xD,{children:(0,a.jsxs)(q.SC,{children:[null===(_=eO.columns.slice(0,8))||void 0===_?void 0:_.map(e=>(0,a.jsx)(q.ss,{className:"text-xs",children:e},e)),eO.columns.length>8&&(0,a.jsx)(q.ss,{className:"text-xs",children:"..."})]})}),(0,a.jsx)(q.RM,{children:null===(V=eO.sampleData)||void 0===V?void 0:V.map((e,s)=>{var t;return(0,a.jsxs)(q.SC,{children:[null===(t=eO.columns.slice(0,8))||void 0===t?void 0:t.map(s=>(0,a.jsx)(q.pj,{className:"text-xs max-w-32 truncate",children:e[s]||""},s)),eO.columns.length>8&&(0,a.jsx)(q.pj,{className:"text-xs",children:"..."})]},s)})})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,a.jsxs)(k.z,{onClick:()=>{eZ("upload"),eB(null),eU({}),eg(null),eS(null)},variant:"outline",className:"text-sm sm:text-base",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Retour"]}),(0,a.jsxs)(k.z,{onClick:sc,className:"flex-1 bg-green-600 hover:bg-green-700 text-sm sm:text-base",children:[(0,a.jsx)(w.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Traiter avec ce mappage"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Traiter"}),(0,a.jsx)(C.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2"})]})]})]}),"processing"===eR&&(0,a.jsx)(a.Fragment,{children:eb&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:["Traitement et stockage en base de donn\xe9es pour"," ",eN," ",ej,"..."]}),(0,a.jsxs)("span",{children:[ew,"%"]})]}),(0,a.jsx)(M,{value:ew,className:"w-full"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}),(0,a.jsx)("span",{children:"Traitement Excel + Stockage base de donn\xe9es - Cela peut prendre plusieurs minutes..."})]})]})})]})]}),(0,a.jsxs)(R.Zb,{className:"shadow-lg border-green-200",children:[(0,a.jsxs)(R.Ol,{children:[(0,a.jsxs)(R.ll,{className:"flex items-center justify-between text-lg sm:text-xl lg:text-2xl text-green-700",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),"Gestion des Types d'Examen"]}),(0,a.jsx)(k.z,{onClick:()=>se(!e9),variant:"outline",size:"sm",className:"border-green-300 text-green-600 hover:bg-green-50",children:e9?"Masquer":"Afficher"})]}),(0,a.jsx)(R.SZ,{className:"text-sm sm:text-base",children:"Cr\xe9er et g\xe9rer les types d'examen disponibles dans le syst\xe8me."})]}),e9&&(0,a.jsxs)(R.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Nom du Type d'Examen"}),(0,a.jsx)(F.I,{id:"examTypeName",placeholder:"Ex: Concours National",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Code"}),(0,a.jsx)(F.I,{id:"examTypeCode",placeholder:"Ex: CONCOURS",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Ann\xe9e"}),(0,a.jsx)(F.I,{id:"examTypeYear",type:"number",placeholder:"2025",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Session (pour BAC uniquement)"}),(0,a.jsxs)(U.Ph,{value:eX,onValueChange:e0,children:[(0,a.jsx)(U.i4,{className:"w-full",children:(0,a.jsx)(U.ki,{placeholder:"Choisir une session"})}),(0,a.jsxs)(U.Bw,{children:[(0,a.jsx)(U.Ql,{value:"NONE",children:"Aucune (non-BAC)"}),(0,a.jsx)(U.Ql,{value:"NORMALE",children:"Session Normale"}),(0,a.jsx)(U.Ql,{value:"COMPLEMENTAIRE",children:"Session Compl\xe9mentaire"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Pour BAC, la session est obligatoire pour diff\xe9rencier les examens"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)(F.I,{id:"examTypeDescription",placeholder:"Description du type d'examen...",className:"w-full"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"hasSections",className:"rounded border-gray-300"}),(0,a.jsx)(P,{htmlFor:"hasSections",className:"text-sm",children:"A des sections"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"hasDecision",defaultChecked:!0,className:"rounded border-gray-300"}),(0,a.jsx)(P,{htmlFor:"hasDecision",className:"text-sm",children:"A des d\xe9cisions"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"requiresThreshold",className:"rounded border-gray-300"}),(0,a.jsx)(P,{htmlFor:"requiresThreshold",className:"text-sm",children:"N\xe9cessite un seuil"})]})]}),(0,a.jsx)(k.z,{onClick:()=>{console.log("Button clicked!");let e=document.getElementById("examTypeName"),s=document.getElementById("examTypeCode"),t=document.getElementById("examTypeYear"),a=document.getElementById("examTypeDescription"),l=document.getElementById("hasSections"),r=document.getElementById("hasDecision"),n=document.getElementById("requiresThreshold");console.log("Elements found:",{nameElement:!!e,codeElement:!!s,yearElement:!!t,descriptionElement:!!a,hasSectionsElement:!!l,hasDecisionElement:!!r,requiresThresholdElement:!!n,sessionTypeElement:!!document.getElementById("examTypeSession")});let i=null==e?void 0:e.value,d=null==s?void 0:s.value,c=null==t?void 0:t.value,o=null==a?void 0:a.value,m=null==l?void 0:l.checked,x=null==r?void 0:r.checked,u=null==n?void 0:n.checked;if(console.log("Form data:",{name:i,code:d,year:c,description:o,hasSections:m,hasDecision:x,requiresThreshold:u,sessionType:eX}),!i||!d||!c){eS({success:!1,message:"Le nom, le code et l'ann\xe9e sont requis"});return}if("BAC"===d&&(!eX||"NONE"===eX)){eS({success:!1,message:"Pour les examens BAC, la session est obligatoire"});return}console.log("Calling createExamType with:",{name:i,code:d,year:c,description:o,hasSections:m,hasDecision:x,requiresThreshold:u,sessionType:eX}),sg({name:i,code:d,year:c,description:o,hasSections:m,hasDecision:x,requiresThreshold:u,sessionType:"NONE"===eX?null:eX||null})},className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"Cr\xe9er Type d'Examen"}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Types d'Examen Existants"}),0===e5.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(E.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Aucun type d'examen cr\xe9\xe9"})]}):(0,a.jsx)("div",{className:"space-y-3",children:e5.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200 hover:border-green-300 transition-colors",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(Z.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:e.code}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Ann\xe9e: ",e.year," • ",e.description||"Aucune description",e.sessionType&&" • Session: ".concat(e.sessionType)]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-1",children:[e.hasSections&&(0,a.jsx)(Z.C,{variant:"secondary",className:"text-xs",children:"Sections"}),e.hasDecision&&(0,a.jsx)(Z.C,{variant:"secondary",className:"text-xs",children:"D\xe9cisions"}),e.requiresThreshold&&(0,a.jsx)(Z.C,{variant:"secondary",className:"text-xs",children:"Seuil"}),e.isActive?(0,a.jsx)(Z.C,{className:"bg-green-100 text-green-800 text-xs",children:"Actif"}):(0,a.jsx)(Z.C,{variant:"destructive",className:"text-xs",children:"Inactif"}),e.isDefault&&(0,a.jsx)(Z.C,{className:"bg-blue-100 text-blue-800 text-xs",children:"Par D\xe9faut"})]})]})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[!e.isDefault&&(0,a.jsx)(k.z,{onClick:()=>sf(e.id),size:"sm",variant:"outline",className:"h-8 px-2 border-blue-300 text-blue-600 hover:bg-blue-50",title:"D\xe9finir par d\xe9faut",children:(0,a.jsx)(S.Z,{className:"h-3 w-3"})}),(0,a.jsx)(k.z,{onClick:()=>sj(e.id),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-red-300 text-red-600 hover:bg-red-50",children:(0,a.jsx)(p.Z,{className:"h-3 w-3"})})]})]},e.id))})]})]})]}),(0,a.jsxs)(R.Zb,{className:"shadow-lg border-purple-200",children:[(0,a.jsxs)(R.Ol,{children:[(0,a.jsxs)(R.ll,{className:"flex items-center justify-between text-lg sm:text-xl lg:text-2xl text-purple-700",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(T.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),"Gestion du Slider d'Images"]}),(0,a.jsx)(k.z,{onClick:()=>st(!ss),variant:"outline",size:"sm",className:"border-purple-300 text-purple-600 hover:bg-purple-50",children:ss?"Masquer":"Afficher"})]}),(0,a.jsx)(R.SZ,{className:"text-sm sm:text-base",children:"G\xe9rer les images du slider de la page d'accueil."})]}),ss&&(0,a.jsxs)(R.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Titre (optionnel)"}),(0,a.jsx)(F.I,{id:"sliderTitle",placeholder:"Titre de l'image...",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"URL de l'Image"}),(0,a.jsx)(F.I,{id:"sliderImageUrl",placeholder:"https://example.com/image.jpg",className:"w-full"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Description (optionnel)"}),(0,a.jsx)(F.I,{id:"sliderDescription",placeholder:"Description de l'image...",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),(0,a.jsx)(F.I,{id:"sliderOrder",type:"number",min:"0",placeholder:"0",className:"w-full"})]}),(0,a.jsx)(k.z,{onClick:()=>{var e,s,t,a;let l=null===(e=document.getElementById("sliderTitle"))||void 0===e?void 0:e.value,r=null===(s=document.getElementById("sliderImageUrl"))||void 0===s?void 0:s.value,n=null===(t=document.getElementById("sliderDescription"))||void 0===t?void 0:t.value,i=parseInt((null===(a=document.getElementById("sliderOrder"))||void 0===a?void 0:a.value)||"0");if(!r){eS({success:!1,message:"L'URL de l'image est requise"});return}sN({title:l,imageUrl:r,description:n,order:i})},className:"w-full bg-purple-600 hover:bg-purple-700 text-white",children:"Ajouter Image au Slider"}),e8.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-800 mb-4 text-sm sm:text-base",children:["Images du Slider (",e8.length,")"]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(q.iA,{children:[(0,a.jsx)(q.xD,{children:(0,a.jsxs)(q.SC,{children:[(0,a.jsx)(q.ss,{className:"w-16",children:"Image"}),(0,a.jsx)(q.ss,{children:"Titre"}),(0,a.jsx)(q.ss,{children:"Description"}),(0,a.jsx)(q.ss,{className:"w-20",children:"Ordre"}),(0,a.jsx)(q.ss,{className:"w-20",children:"Statut"}),(0,a.jsx)(q.ss,{className:"w-32",children:"Actions"})]})}),(0,a.jsx)(q.RM,{children:e8.sort((e,s)=>e.order-s.order).map(e=>(0,a.jsxs)(q.SC,{children:[(0,a.jsx)(q.pj,{children:(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden border",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.title||"Slider image",className:"w-full h-full object-cover",onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect width='48' height='48' fill='%23f3f4f6'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%236b7280' font-size='8'%3EImage%3C/text%3E%3C/svg%3E"}})})}),(0,a.jsx)(q.pj,{children:(0,a.jsxs)("div",{className:"max-w-xs",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.title||"Sans titre"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.imageUrl})]})}),(0,a.jsx)(q.pj,{children:(0,a.jsx)("p",{className:"text-sm text-gray-600 max-w-xs truncate",children:e.description||"Aucune description"})}),(0,a.jsx)(q.pj,{children:(0,a.jsx)(Z.C,{variant:"outline",className:"text-xs",children:e.order})}),(0,a.jsx)(q.pj,{children:(0,a.jsx)(Z.C,{variant:e.isActive?"default":"secondary",className:"text-xs ".concat(e.isActive?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200"),children:e.isActive?"Actif":"Inactif"})}),(0,a.jsx)(q.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.z,{size:"sm",variant:"outline",onClick:()=>sy(e.id,e.isActive),className:"h-8 w-8 p-0",title:e.isActive?"D\xe9sactiver":"Activer",children:e.isActive?(0,a.jsx)(D.Z,{className:"h-3 w-3"}):(0,a.jsx)(A.Z,{className:"h-3 w-3"})}),(0,a.jsx)(k.z,{size:"sm",variant:"outline",onClick:()=>{document.getElementById("sliderTitle").value=e.title||"",document.getElementById("sliderImageUrl").value=e.imageUrl,document.getElementById("sliderDescription").value=e.description||"",document.getElementById("sliderOrder").value=e.order.toString();let s=document.querySelector('[onclick*="createSliderImage"]');s&&(s.textContent="Mettre \xe0 jour l'Image",s.onclick=()=>{var t,a,l,r;let n=null===(t=document.getElementById("sliderTitle"))||void 0===t?void 0:t.value,i=null===(a=document.getElementById("sliderImageUrl"))||void 0===a?void 0:a.value,d=null===(l=document.getElementById("sliderDescription"))||void 0===l?void 0:l.value,c=parseInt((null===(r=document.getElementById("sliderOrder"))||void 0===r?void 0:r.value)||"0");if(!i){eS({success:!1,message:"L'URL de l'image est requise"});return}sv(e.id,{title:n,imageUrl:i,description:d,order:c}),s.textContent="Ajouter Image au Slider",s.onclick=()=>{var e,s,t,a;let l=null===(e=document.getElementById("sliderTitle"))||void 0===e?void 0:e.value,r=null===(s=document.getElementById("sliderImageUrl"))||void 0===s?void 0:s.value,n=null===(t=document.getElementById("sliderDescription"))||void 0===t?void 0:t.value,i=parseInt((null===(a=document.getElementById("sliderOrder"))||void 0===a?void 0:a.value)||"0");if(!r){eS({success:!1,message:"L'URL de l'image est requise"});return}sN({title:l,imageUrl:r,description:n,order:i})},document.getElementById("sliderTitle").value="",document.getElementById("sliderImageUrl").value="",document.getElementById("sliderDescription").value="",document.getElementById("sliderOrder").value=""})},className:"h-8 w-8 p-0",title:"Modifier",children:(0,a.jsx)(I.Z,{className:"h-3 w-3"})}),(0,a.jsx)(k.z,{size:"sm",variant:"outline",onClick:()=>sb(e.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Supprimer",children:(0,a.jsx)(z.Z,{className:"h-3 w-3"})})]})})]},e.id))})]})})]}),0===e8.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(T.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm",children:"Aucune image du slider trouv\xe9e"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Ajoutez votre premi\xe8re image pour commencer"})]})]})]}),eE&&(0,a.jsxs)(R.Zb,{className:"shadow-lg ".concat(eE.success?"border-green-200":"border-red-200"),children:[(0,a.jsx)(R.Ol,{children:(0,a.jsxs)(R.ll,{className:"flex items-center text-lg sm:text-xl lg:text-2xl ".concat(eE.success?"text-green-700":"text-red-700"),children:[eE.success?(0,a.jsx)(j.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}):(0,a.jsx)(AlertCircle,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2"}),eE.success?"T\xe9l\xe9chargement R\xe9ussi":"\xc9chec du T\xe9l\xe9chargement"]})}),(0,a.jsxs)(R.aY,{children:[(0,a.jsx)("p",{className:"mb-4 text-sm sm:text-base",children:eE.message}),!eE.success&&eE.details&&(0,a.jsxs)("div",{className:"bg-red-50 p-3 sm:p-4 rounded-lg border border-red-200 mb-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-red-800 mb-2 text-sm sm:text-base",children:"D\xe9tails de l'erreur:"}),(0,a.jsx)("pre",{className:"text-xs text-red-700 overflow-auto break-all",children:JSON.stringify(eE.details,null,2)})]}),eE.success&&eE.stats&&(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg border border-green-200 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 mr-2"}),(0,a.jsx)("h4",{className:"font-semibold text-green-800 text-sm sm:text-base",children:"Donn\xe9es upload\xe9es avec succ\xe8s !"})]}),(0,a.jsx)("p",{className:"text-green-700 text-xs sm:text-sm mb-3",children:"Les donn\xe9es ont \xe9t\xe9 stock\xe9es en base de donn\xe9es et sont maintenant disponibles sur le site."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)(k.z,{onClick:()=>window.open("/","_blank"),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Voir sur le Site"]}),(0,a.jsxs)(k.z,{onClick:sn,size:"sm",variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50 text-xs sm:text-sm",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Actualiser DB Info"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:"Total \xc9tudiants"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-700",children:(null==eE?void 0:null===(Y=eE.stats)||void 0===Y?void 0:Y.totalStudents)||0})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-green-600 font-medium",children:"Admis"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-700",children:(null==eE?void 0:null===(G=eE.stats)||void 0===G?void 0:G.admittedStudents)||0}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["(",(null==eE?void 0:null===(Q=eE.stats)||void 0===Q?void 0:Q.admissionRate)||0,"%)"]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg border border-purple-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-purple-600 font-medium",children:"Sections"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-purple-700",children:(null==eE?void 0:null===(H=eE.stats)||void 0===H?void 0:null===(J=H.sections)||void 0===J?void 0:J.length)||0})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-3 sm:p-4 rounded-lg border border-orange-200",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm text-orange-600 font-medium",children:"Moyenne G\xe9n\xe9rale"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-orange-700",children:(null==eE?void 0:null===(W=eE.stats)||void 0===W?void 0:W.averageScore)||"0.00"})]})]}),(null==eE?void 0:eE.details)&&(0,a.jsxs)("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg border border-gray-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-2 text-sm sm:text-base",children:"Informations du fichier et stockage:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-xs sm:text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nom:"})," ",(0,a.jsx)("span",{className:"break-all",children:eE.details.name})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Taille:"})," ",((eE.details.size||0)/1024/1024).toFixed(2),"MB"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Type:"})," ",eE.details.type||"N/A"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Stock\xe9:"})," ✅ Oui (Database PostgreSQL)"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Persistant:"})," ✅ Oui"]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium mb-2 text-sm sm:text-base",children:"Sections (SERIE):"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:(null==eE?void 0:null===($=eE.stats)||void 0===$?void 0:null===(K=$.sections)||void 0===K?void 0:K.map(e=>(0,a.jsx)(Z.C,{variant:"secondary",className:"text-xs",children:e},e)))||(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Aucune section"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium mb-2 text-sm sm:text-base",children:"Wilayas:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[null==eE?void 0:null===(es=eE.stats)||void 0===es?void 0:null===(ee=es.wilayas)||void 0===ee?void 0:null===(X=ee.slice(0,8))||void 0===X?void 0:X.map(e=>(0,a.jsx)(Z.C,{variant:"outline",className:"text-xs",children:e},e)),((null==eE?void 0:null===(ea=eE.stats)||void 0===ea?void 0:null===(et=ea.wilayas)||void 0===et?void 0:et.length)||0)>8&&(0,a.jsxs)(Z.C,{variant:"outline",className:"text-xs",children:["+",((null==eE?void 0:null===(er=eE.stats)||void 0===er?void 0:null===(el=er.wilayas)||void 0===el?void 0:el.length)||0)-8," ","autres"]}),(!(null==eE?void 0:null===(en=eE.stats)||void 0===en?void 0:en.wilayas)||0===eE.stats.wilayas.length)&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Aucune wilaya"})]})]})]})]})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsxs)(R.Zb,{className:"w-full max-w-md shadow-2xl border-blue-200",children:[(0,a.jsxs)(R.Ol,{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-lg p-6",children:[(0,a.jsxs)(R.ll,{className:"flex items-center text-2xl justify-center",children:[(0,a.jsx)(r.Z,{className:"h-6 w-6 mr-2"}),"Connexion Dashboard"]}),(0,a.jsx)(R.SZ,{className:"text-blue-100 text-center",children:"Veuillez vous connecter pour acc\xe9der au dashboard administrateur"})]}),(0,a.jsx)(R.aY,{className:"p-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),eh(""),"MedAhmed01"===ec&&"Medahmed28233"===em?(ed(!0),localStorage.setItem("adminAuthenticated","true")):eh("Nom d'utilisateur ou mot de passe incorrect")},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{htmlFor:"username",className:"text-sm font-medium text-gray-700",children:"Nom d'utilisateur"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(F.I,{id:"username",type:"text",placeholder:"Entrez votre nom d'utilisateur",value:ec,onChange:e=>eo(e.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500 focus:outline-none",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(P,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Mot de passe"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(F.I,{id:"password",type:"password",placeholder:"Entrez votre mot de passe",value:em,onChange:e=>ex(e.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500 focus:outline-none",required:!0})]})]}),eu&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:eu})}),(0,a.jsx)(k.z,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2",children:"Se connecter"})]})})]})})}},5974:function(e,s,t){"use strict";t.d(s,{C:function(){return i}});var a=t(7437);t(2265);var l=t(535),r=t(4508);let n=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...l}=e;return(0,a.jsx)("div",{className:(0,r.cn)(n({variant:t}),s),...l})}},2869:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var a=t(7437),l=t(2265),r=t(7053),n=t(535),i=t(4508);let d=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,s)=>{let{className:t,variant:l,size:n,asChild:c=!1,...o}=e,m=c?r.g7:"button";return(0,a.jsx)(m,{className:(0,i.cn)(d({variant:l,size:n,className:t})),ref:s,...o})});c.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var a=t(7437),l=t(2265),r=t(4508);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},5186:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(7437),l=t(2265),r=t(4508);let n=l.forwardRef((e,s)=>{let{className:t,type:l,...n}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},3647:function(e,s,t){"use strict";t.d(s,{Bw:function(){return p},Ph:function(){return o},Ql:function(){return g},i4:function(){return x},ki:function(){return m}});var a=t(7437),l=t(2265),r=t(4038),n=t(875),i=t(2135),d=t(401),c=t(4508);let o=r.fC;r.ZA;let m=r.B4,x=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(r.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[l,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=r.xz.displayName;let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});u.displayName=r.u_.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=r.$G.displayName;let p=l.forwardRef((e,s)=>{let{className:t,children:l,position:n="popper",...i}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(u,{}),(0,a.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(h,{})]})})});p.displayName=r.VY.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=r.__.displayName;let g=l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(r.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:l})]})});g.displayName=r.ck.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=r.Z0.displayName},3578:function(e,s,t){"use strict";t.d(s,{RM:function(){return d},SC:function(){return c},iA:function(){return n},pj:function(){return m},ss:function(){return o},xD:function(){return i}});var a=t(7437),l=t(2265),r=t(4508);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",t),...l})})});n.displayName="Table";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b",t),...l})});i.displayName="TableHeader";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",t),...l})});d.displayName="TableBody",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...l})}).displayName="TableFooter";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tr",{ref:s,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...l})});c.displayName="TableRow";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...l})});o.displayName="TableHead";let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...l})});m.displayName="TableCell",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",t),...l})}).displayName="TableCaption"},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return r}});var a=t(1994),l=t(3335);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.m6)((0,a.W)(s))}}},function(e){e.O(0,[203,468,678,971,117,744],function(){return e(e.s=8862)}),_N_E=e.O()}]);
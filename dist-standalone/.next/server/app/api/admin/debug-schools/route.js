"use strict";(()=>{var e={};e.id=185,e.ids=[185],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9931:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var o={};r.r(o),r.d(o,{GET:()=>l});var s=r(3278),a=r(5002),n=r(4877),i=r(1309),c=r(4738);async function l(){try{console.log("\uD83D\uDD0D Getting all school names from database...");let e=await c._.student.findMany({select:{ecole:!0,etablissement:!0,year:!0,examType:!0},distinct:["ecole","year","examType"],orderBy:[{year:"desc"},{examType:"asc"},{ecole:"asc"}]}),t=e.reduce((e,t)=>{let r=`${t.examType} ${t.year}`;return e[r]||(e[r]=[]),e[r].push({ecole:t.ecole,etablissement:t.etablissement}),e},{});return i.NextResponse.json({status:"SUCCESS",message:"All school names retrieved",data:t,totalSchools:e.length,timestamp:new Date().toISOString()})}catch(e){return console.error("❌ Debug schools error:",e),i.NextResponse.json({status:"ERROR",message:"Failed to retrieve school names",error:e.message,timestamp:new Date().toISOString()},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/debug-schools/route",pathname:"/api/admin/debug-schools",filename:"route",bundlePath:"app/api/admin/debug-schools/route"},resolvedPagePath:"D:\\WORK\\FREELANCER\\student-result-upgraded\\app\\api\\admin\\debug-schools\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:m}=u,g="/api/admin/debug-schools/route";function h(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},4738:(e,t,r)=>{r.d(t,{_:()=>a});var o=r(3524);let s=globalThis,a=(()=>{if(process.env.DATABASE_URL)return s.prisma??new o.PrismaClient({log:["error"],datasources:{db:{url:process.env.DATABASE_URL}},__internal:{engine:{connectionLimit:5,queryTimeout:15e3,connectionTimeout:5e3,pool:{min:1,max:5,acquireTimeoutMillis:15e3,createTimeoutMillis:15e3,destroyTimeoutMillis:3e3,idleTimeoutMillis:15e3,reapIntervalMillis:500,createRetryIntervalMillis:100}}}})})();a&&process.on("beforeExit",async()=>{try{await Promise.race([a.$disconnect(),new Promise(e=>setTimeout(e,5e3))])}catch(e){console.error("Error disconnecting Prisma:",e)}}),process.on("uncaughtException",async e=>{console.error("Uncaught Exception:",e);try{a&&await a.$disconnect()}catch(e){console.error("Error disconnecting Prisma on uncaught exception:",e)}process.exit(1)})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9379,4833],()=>r(9931));module.exports=o})();